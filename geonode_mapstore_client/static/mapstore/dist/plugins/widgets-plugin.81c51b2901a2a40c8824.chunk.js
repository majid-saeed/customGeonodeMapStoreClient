(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[9955],{81808:(e,t,n)=>{"use strict";n.d(t,{eD:()=>r,AM:()=>o,ok:()=>i,Gg:()=>a,nT:()=>c,TL:()=>l,KS:()=>u,EB:()=>s,DZ:()=>f,Aw:()=>p,V_:()=>d,H0:()=>g,jW:()=>y,JZ:()=>v,fQ:()=>b,HK:()=>m,YO:()=>h,I6:()=>O});var r="MAP:LOAD_NEW_MAP",o="MAP_LOAD_MAP_CONFIG",i="MAP_CONFIG_LOADED",a="MAP_CONFIG_LOAD_ERROR",c="MAP_LOAD_INFO",l="MAP_INFO_LOAD_START",u="MAP_INFO_LOADED",s="MAP_INFO_LOAD_ERROR",f="MAP:MAP_SAVE_ERROR",p="MAP:MAP_SAVED",d="MAP:RESET_MAP_SAVE_ERROR";function g(e,t,n){return{type:i,config:e,legacy:!!t,mapId:t,zoomToExtent:n}}function y(e,t){return{type:a,error:e,mapId:t}}function v(e,t,n,r,i){return{type:o,configName:e,mapId:t,config:n,mapInfo:r,overrideConfig:i}}function b(e,t){return{type:u,mapId:t,info:e}}function m(e,t){return{type:s,mapId:e,error:t}}function h(e){return{type:l,mapId:e}}function O(e){return{type:c,mapId:e}}},55927:(e,t,n)=>{"use strict";n.d(t,{R4:()=>r,E9:()=>o});var r="DASHBOARD:DASHBOARD_RESET",o="DASHBOARD:DASHBOARD_LOADED"},62770:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var r=n(21413),o=n.n(r),i=n(75263),a=n.n(i),c=n(62582),l=n.n(c),u=n(77263),s=n.n(u),f=n(90079);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},y(e,t)}function v(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&y(e,t)}(c,e);var t,n,r,i,a=(r=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=m(r);if(i){var n=m(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return v(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),h(b(t=a.call(this,e)),"state",{containerWidth:0,legendContainerStyle:{overflowX:"auto"}}),h(b(t),"canShow",(function(e){return e.visibility||!t.props.showOnlyIfVisible})),h(b(t),"useLegendOptions",(function(){return!l()(t.props.node.legendOptions)&&s()(t.props.node.legendOptions.legendHeight)&&s()(t.props.node.legendOptions.legendWidth)})),h(b(t),"setOverflow",(function(){return t.useLegendOptions()&&t.props.node.legendOptions.legendWidth>t.state.containerWidth})),t.containerRef=o().createRef(),t}return t=c,n=[{key:"componentDidMount",value:function(){var e=this.containerRef.current&&this.containerRef.current.clientWidth;this.setState(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({containerWidth:e},this.state))}},{key:"render",value:function(){var e=this.props.node||{},t=this.canShow(e)&&"wms"===e.type&&"background"!==e.group,n=t&&this.useLegendOptions();return t?o().createElement("div",{style:this.setOverflow()?this.state.legendContainerStyle:this.props.legendContainerStyle,ref:this.containerRef},o().createElement(f.Z,{style:this.setOverflow()?{}:this.props.legendStyle,layer:e,currentZoomLvl:this.props.currentZoomLvl,scales:this.props.scales,legendHeight:n&&this.props.node.legendOptions&&this.props.node.legendOptions.legendHeight||this.props.legendHeight||void 0,legendWidth:n&&this.props.node.legendOptions&&this.props.node.legendOptions.legendWidth||this.props.legendWidth||void 0,legendOptions:this.props.WMSLegendOptions,scaleDependent:this.props.scaleDependent,language:this.props.language})):null}}],n&&g(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(o().Component);h(O,"propTypes",{node:a().object,legendContainerStyle:a().object,legendStyle:a().object,showOnlyIfVisible:a().bool,currentZoomLvl:a().number,scales:a().array,WMSLegendOptions:a().string,scaleDependent:a().bool,language:a().string,legendWidth:a().number,legendHeight:a().number}),h(O,"defaultProps",{legendContainerStyle:{},showOnlyIfVisible:!1,scaleDependent:!0});const w=O},72688:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var r=n(21413),o=n.n(r),i=n(75263),a=n.n(i),c=n(38560),l=n(43614),u=n(3329),s=n.n(u);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(){return p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p.apply(this,arguments)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},y(e,t)}function v(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&y(e,t)}(u,e);var t,n,r,i,a=(r=u,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=m(r);if(i){var n=m(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return v(this,e)});function u(){var e;d(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return h(b(e=a.call.apply(a,[this].concat(n))),"onConfirm",(function(){e.props.onConfirm()})),e}return t=u,(n=[{key:"render",value:function(){var e=this,t=o().createElement("span",{role:"footer"},o().createElement("div",{style:{float:"left"}}),o().createElement(c.Z,{ref:"confirmButton",disabled:this.props.running,className:this.props.className,key:"confirmButton",bsStyle:"primary",bsSize:this.props.buttonSize,onClick:function(){e.onConfirm()}},this.props.running?o().createElement(s(),{spinnerName:"circle",overrideSpinnerClassName:"spinner",noFadeIn:!0}):null,this.props.confirmText),this.props.includeCloseButton?o().createElement(c.Z,{key:"cancelButton",ref:"cancelButton",bsSize:this.props.buttonSize,onClick:this.props.onClose},this.props.cancelText):o().createElement("span",null)),n=this.props.body;return o().createElement(l.Z,p({},this.props.options,{show:this.props.show,onHide:this.props.onClose}),o().createElement(l.Z.Header,{key:"dialogHeader",closeButton:!0},o().createElement(l.Z.Title,null,this.props.titleText)),o().createElement(l.Z.Body,null,n),o().createElement(l.Z.Footer,null,t))}}])&&g(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(o().Component);h(O,"propTypes",{className:a().string,show:a().bool,options:a().object,onConfirm:a().func,onClose:a().func,closeGlyph:a().string,style:a().object,buttonSize:a().string,includeCloseButton:a().bool,body:a().oneOfType([a().string,a().element]),titleText:a().oneOfType([a().string,a().element]),confirmText:a().oneOfType([a().string,a().element]),cancelText:a().oneOfType([a().string,a().element]),running:a().bool}),h(O,"defaultProps",{onConfirm:function(){},onClose:function(){},options:{animation:!1},className:"",closeGlyph:"",style:{},includeCloseButton:!0,body:"",titleText:"Confirm Delete",confirmText:"Delete",cancelText:"Cancel"});const w=O},43614:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var r=n(37295),o=n.n(r),i=n(23885),a=n(61365);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function f(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&s(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=p(r);if(o){var n=p(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return f(this,e)});function a(){return l(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"handleDialogClick",value:function(e){e.target===e.currentTarget&&this.props.onHide(e)}}])&&u(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(i.Modal);const g=o()((0,a.Z)(d),{Body:i.Modal.Body,Dialog:i.Modal.Dialog,Footer:i.Modal.Footer,Header:i.Modal.Header,Title:i.Modal.Title})},1036:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(31476),o=n.n(r);const i=(0,n(95437).shouldUpdate)((function(e,t){return!o()(e.start,t.start)||e.disabled!==t.disabled}))(n(37752))},43716:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Rt});var r=n(21413),o=n.n(r),i=n(95437),a=n(12425),c=n(39860);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const u=(0,i.compose)(a.Z,(0,i.compose)((0,i.withState)("showTable","setShowTable",!1),(0,i.withHandlers)({toggleTableView:function(e){var t=e.setShowTable,n=e.showTable;return function(){return t(!n)}}}),(0,i.withProps)((function(e){var t,n=e.widgetTools,r=void 0===n?[]:n,o=e.toggleTableView,i=void 0===o?function(){}:o;return{widgetTools:[].concat((t=r,function(e){if(Array.isArray(e))return l(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:"features-grid",target:"menu",textId:"widgets.widget.menu.showChartData",onClick:function(){return i()}}])}}))),(0,c.tR)(),(0,c.AV)(),(0,c.E6)(),(0,i.branch)((function(e){return!e.showTable}),(0,c.um)())),s=(0,i.compose)(a.Z,(0,c.tR)(),(0,c.E6)(),(0,c.um)());var f=n(57546),p=n.n(f);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const v=(0,i.compose)((0,i.withPropsOnChange)(["gridEvents"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.gridEvents,n=void 0===t?{}:t,r=e.updateProperty,o=void 0===r?function(){}:r;return{gridEvents:g(g({},n),{},{onAddFilter:function(e){return o("quickFilters.".concat(e.attribute),e)},onColumnResize:function(e,t,n,r,i,a){return o('options.columnSettings["'.concat(p()(a.filter((function(e){return!e.hide}))[e],"name"),'"].width'),t)}})}})),a.Z,(0,c.tR)(),(0,c.E6)(),(0,c.um)(),(0,i.withPropsOnChange)(["gridEvents"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.gridEvents,n=void 0===t?{}:t,r=e.updateProperty,o=void 0===r?function(){}:r;return{gridEvents:g(g({},n),{},{onGridSort:function(e,t){return o("sortOptions",{sortBy:e,sortOrder:t})}})}})));var b=n(13314);const m=(0,i.compose)(a.Z,(0,c.tR)(),(0,c.G5)(),(0,c.E6)(),(0,c.um)()),h=(0,i.compose)(a.Z,(0,c.tR)(),(0,c.E6)(),(0,c.um)());var O=n(87017),w=n(39589),j=n(54432),P=n.n(j),S=n(2936),E=n.n(S),D=n(78889),C=n(73849),x=n(25382),T=n(2822),k=n.n(T),R=n(86850);const I=function(e){return e.switchMap((function(e){var t=e.layer,n=void 0===t?{}:t,r=e.options,o=void 0===r?{}:r,i=e.filter,a=e.onLoad,c=void 0===a?function(){}:a,l=e.onLoadError,u=void 0===l?function(){}:l;return(0,R.Mc)(n,i,{timeout:15e3,params:{propertyName:o.propertyName,viewParams:o.viewParams}}).map((function(){return{loading:!1,error:void 0}})).do((function(e){return c({features:e.features,pagination:{totalFeatures:e.totalFeatures}})})).catch((function(e){return k().Observable.of({loading:!1,error:e,data:[]}).do(u)}))}))};function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(2822);const M=function(e){return e.filter((function(e){var t=e.layer;return(void 0===t?{}:t).name})).distinctUntilChanged((function(e,t){var n=e.layer,r=void 0===n?{}:n,o=e.options,i=void 0===o?{}:o,a=e.filter,c=e.sortOptions;return t.layer&&r.name===t.layer.name&&r.loadingError===t.layer.loadingError&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.propertyName===t.propertyName&&e.viewParams===t.viewParams}(i,t.options)&&a===t.filter&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.sortBy===t.sortBy&&e.sortOrder===t.sortOrder}(c,t.sortOptions)})).map((function(e){return F(F({},e),{},{features:[],pages:[],pagination:{}})}))};var Z=n(96958);function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){N(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const z=function(e){return function(t){return t.switchMap((function(t){var n=t.layer,r=void 0===n?{}:n,o=t.size,i=void 0===o?20:o,a=t.maxStoredPages,c=void 0===a?5:a,l=t.filter,u=t.options,s=void 0===u?{}:u,f=t.sortOptions,p=t.pages,d=t.features,g=void 0===d?[]:d,y=t.onLoad,v=void 0===y?function(){}:y,b=t.onLoadError,m=void 0===b?function(){}:b;return e.switchMap((function(e,t){var n=e.pagesRange,o=e.pagination,a=void 0===o?{}:o;return function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(t),(0,R.Mc)(r,l,W(W({},(0,Z.S9)(n,p,i)),{},{sortOptions:f,timeout:15e3,totalFeatures:a.totalFeatures,propertyName:s.propertyName,viewParams:s.viewParams})).do((function(e){return v(W(W({},(0,Z.f1)(e,n,{pages:p,features:g},W(W({},(0,Z.S9)(n,p,i)),{},{size:i,maxStoredPages:c}))),{},{pagination:{totalFeatures:e.totalFeatures}}))})).map((function(){return{loading:!1}})).catch((function(e){return k().Observable.of({loading:!1,error:e}).do(m)})).startWith({loading:!0})}))}))}};function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){H(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var B=function(e){var t=(0,i.createEventHandler)(),n=t.handler,r=t.stream;return(0,x.Z)(e).combineLatest(function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return M(e).let(n?z(t.withLatestFrom(e.map((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).pagination;return{pagination:void 0===e?{}:e}})),(function(e,t){return V({pagesRange:e},t)}))):I).startWith({})}(e,r.startWith({startPage:0,endPage:1})),(function(e,t){return V(V(V({},e),t),{},{pageEvents:{moreFeatures:n,onPageChange:function(){}}})})).startWith({loading:!0})};const q=(0,i.compose)((0,i.defaultProps)({virtualScroll:!0,size:20,maxStoredPages:5}),(0,i.withStateHandlers)({pages:[],features:[],pagination:{}},{setData:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.pages,n=e.features,r=e.pagination;return{pages:t,features:n,pagination:r,error:void 0}}}}),(0,i.withHandlers)({onLoad:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.setData,n=void 0===t?function(){}:t,r=e.onLoad,o=void 0===r?function(){}:r;return function(){n.apply(void 0,arguments),o.apply(void 0,arguments)}}}),(0,i.withProps)((function(){return{dataStreamFactory:B}})),C.Z,(0,i.withProps)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=e.describeFeatureType,o=e.columnSettings,i=void 0===o?{}:o;return{columnSettings:E()(r?(0,D.getFeatureTypeProperties)(r).filter((function(e){return!P()(n.propertyName||[],e.name)})).reduce((function(e,t){return V(V({},e),{},H({},t.name,{hide:!0}))}),{}):{},n.columnSettings||{},i)}})));var U=n(30881),$=n(8488),J=n(73339),K=n(66023),Q=n.n(K),Y=n(62582),X=n.n(Y),ee=n(31476),te=n.n(ee),ne=n(70956),re=n(99767),oe=n(27835),ie=function(e){var t=e.wfsGetFeature;return(0,oe.Uh)("gs:Bounds",[(0,re.qP)("features",(0,re.fA)("text/xml","http://geoserver/wfs","POST",t))],(0,re.DK)((0,re.En)("bounds","application/json")))};var ae=n(47805),ce=n(24262),le=n(61868),ue=n(52259);function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const de=(0,i.compose)((0,i.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,n=e.dependencies;return t&&(!X()(n.quickFilters)||!X()(n.filter))}),(0,i.compose)((0,i.withPropsOnChange)(["id"],(function(e){var t=e.hookRegister;return{hookRegister:(void 0===t?null:t)||(0,ue.createRegisterHooks)()}})),(0,i.mapPropsStream)((function(e){return e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return te()(e.dependencies.quickFilters,t.dependencies.quickFilters)&&te()(e.dependencies.filter,t.dependencies.filter)&&te()(e.dependencies.layer,t.dependencies.layer)})).debounceTime(500).switchMap((function(e){var t=e.mapSync,n=e.dependencies,r=void 0===n?{}:n,o=e.filter,i=e.hookRegister;if(!t||X()(r.layer))return T.Observable.of({loading:!1});var a={};r.quickFilters&&(a=fe(fe({},a),(0,ne.r$)(o,r.quickFilters,r.options))),r.filter&&(a=fe(fe({},a),(0,ae.composeAttributeFilters)([a,r.filter])));var c=r&&r.layer&&r.layer.name;if(!X()(a)){a=fe(fe({},a),{},{options:fe(fe({},a.options||{}),{},{noSchemaLocation:!0})});var l=(0,ae.toOGCFilter)(c,a,"1.1.0");return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,oe.mG)(e,ie(t),{},n)}((0,ce.ZA)(r.layer),{wfsGetFeature:l}).switchMap((function(e){var t,n,r;if(Q().parseString(e,{explicitArray:!1},(function(e,o){t=o["ows:BoundingBox"],n=t["ows:LowerCorner"].split(" "),r=t["ows:UpperCorner"].split(" ")})),"0.0 0.0"===t["ows:LowerCorner"]&&"-1.0 -1.0"===t["ows:UpperCorner"])return T.Observable.of({loading:!1});var o={minx:parseFloat(n[0]),miny:parseFloat(n[1]),maxx:parseFloat(r[0]),maxy:parseFloat(r[1])},a=i.getHook(ue.ZOOM_TO_EXTENT_HOOK);return a&&a(o,{crs:"EPSG:4326",maxZoom:21}),T.Observable.of({loading:!1})})).startWith({loading:!0}).catch((function(e){return T.Observable.of({error:"error getting bounds from filter",details:e})}))}return T.Observable.of({loading:!1})})).combineLatest(e,(function(e){var t=e.loading,n=void 0!==t&&t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,le.t8)("loading",n,r)}))})))));var ge=n(50542),ye=n.n(ge),ve=n(43378);function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){he(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function he(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Oe=(0,i.compose)((0,i.withPropsOnChange)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,n=e.dependencies,r=void 0===n?{}:n,o=e.map,i=void 0===o?{}:o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=arguments.length>2?arguments[2]:void 0;return t!==a.mapSync||!te()(r,a.dependencies)||!te()(i,a.map)||c!==a.filter}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,n=e.dependencies,r=void 0===n?{}:n,o=e.filter,i=void 0===o?{}:o,a=e.map,c=void 0===a?{layers:[]}:a,l=r&&r.layer&&r.layer.name,u=ye()(c.layers,{name:l})||{},s={},f={},p=void 0;return t&&!X()(u)&&(r.quickFilters&&(s=me(me({},s),(0,ne.r$)(i,r.quickFilters,r.options))),r.filter&&(s=me(me({},s),(0,ae.composeAttributeFilters)([s,r.filter]))),!X()(s)&&(0,ae.toCQLFilter)(s))?(p=(0,ae.toCQLFilter)(s),f=(0,le.cc)(!1,me(me({},u),{},{params:(0,ve.v)({params:{CQL_FILTER:p}},u&&u.params&&u.params.CQL_FILTER)}),{name:l},c.layers),{map:me(me({},c),{},{layers:f})}):(f=c.layers.map((function(e){return me(me({},e),{},{params:me(me({},e.params),{},{CQL_FILTER:void 0})})})),{map:me(me({},c),{},{layers:f})})}))),we=function(e){return(0,i.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync;return t}),(0,i.withPropsOnChange)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.mapSync,r=t.dependencies,o=void 0===r?{}:r,a=arguments.length>1?arguments[1]:void 0,c=a.mapSync,l=a.dependencies;return l&&(0,i.shallowEqual)(o[e],l[e])||n===c}),(function(t){var n=t.map,r=t.mapSync,o=t.dependencies,i=void 0===o?{}:o;return{mapStateSource:"__dependency_system__",map:i[e]&&r?(0,le.t8)(e,i[e],n):n}})))};var je=n(23885),Pe=["data"];function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(n),!0).forEach((function(t){De(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function De(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ce(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,n=void 0===t?[]:t,r=Ce(e,Pe),i=Object.keys(n.reduce((function(e,t){return Ee(Ee({},e),t)}),{}));return o().createElement("div",{className:"mapstore-widget-table"},o().createElement(je.Table,{striped:!0},o().createElement("thead",null,o().createElement("tr",null,i.map((function(e,t){return o().createElement("th",null,t+1===i.length&&r.yAxisLabel?r.yAxisLabel:t>0?"".concat(e):e)})))),o().createElement("tbody",null,n.map((function(e){return o().createElement("tr",null,i.map((function(t){return o().createElement("td",null,e[t])})))})))))};var Te=n(622),ke=n(73014),Re=n(42415),Ie=n(39837),Ae=n(28315),Fe=(0,ke.Z)()((0,Re.Z)((0,Ie.Z)(Ae.Z)));const _e=function(e){return o().createElement("div",{className:"mapstore-widget-chart"},o().createElement(Te.Z,null,o().createElement(Fe,e)))};var Me=n(5346),Ze=n(65539),Le=n(72688);const We=function(e){var t=e.id,n=e.title,r=e.confirmDelete,i=void 0!==r&&r,a=e.className,c=e.isDraggable,l=void 0===c||c,u=e.toggleDeleteConfirm,s=void 0===u?function(){}:u,f=e.onDelete,p=void 0===f?function(){}:f,d=e.icons,g=e.topLeftItems,y=e.topRightItems,v=e.headerStyle,b=void 0===v?{}:v,m=e.children;return o().createElement("div",{className:"mapstore-widget-card",id:t},o().createElement(Ze.Z,{className:a,header:o().createElement("div",{style:b,className:"mapstore-widget-info ".concat(l?"draggableHandle":"")},o().createElement("div",{className:"mapstore-widget-header"},o().createElement("span",{className:"widget-icons"},d),g,o().createElement("span",{className:"widget-title"},n),o().createElement("span",{className:"mapstore-widget-options"},y)))},m),i?o().createElement(Le.Z,{confirmText:o().createElement(Me.Z,{msgId:"widgets.widget.menu.delete"}),titleText:o().createElement(Me.Z,{msgId:"widgets.widget.menu.delete"}),body:o().createElement(Me.Z,{msgId:"widgets.widget.menu.confirmDelete"}),show:i,onClose:function(){return s(!1)},onConfirm:function(){return p(t)}}):null)};var Ne=["id","title","description","headerStyle","data","series","loading","icons","showTable","topRightItems","confirmDelete","dataGrid","onDelete","toggleTableView","toggleDeleteConfirm"];function ze(){return ze=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ze.apply(this,arguments)}var Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.showTable,n=e.toggleTableView,r=void 0===n?function(){}:n;return t?o().createElement(je.Glyphicon,{onClick:function(){r()},glyph:"arrow-left pull-left"}):null};var Ve=n(82030),He=n(99707),Be=(0,Ve.Z)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text;return!t}),(function(){return{glyph:"sheet",messageId:"widgets.errors.notext"}}),He.Z)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text;return o().createElement("div",{className:"mapstore-widget-default-content ql-editor",dangerouslySetInnerHTML:{__html:t}})})),qe=n(10511),Ue=n.n(qe),$e=n(75480),Je=n(27298),Ke=["layers"];function Qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(n),!0).forEach((function(t){Xe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var et=(0,i.withHandlers)({onMapViewChanges:function(e){var t=e.updateProperty,n=void 0===t?function(){}:t;return function(e){e.layers;var t=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Ke);return n("map",t,"merge")}}})(Je.Z),tt=n(18027);function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(n),!0).forEach((function(t){ot(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ot(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var it=(0,i.compose)((0,i.mapPropsStream)((function(e){return e.combineLatest(e.pluck("quickFilterStream$").distinctUntilChanged().switchMap((function(e){return e})).startWith(void 0),(function(e,t){var n=t&&e.options&&ye()(e.options.propertyName,(function(t){return t===e.attributeName}))&&t[e.attributeName]||{},r=n&&(n.rawValue||n.value);return rt(rt({},e),{},{value:r})}))}))),at=function(e){var t=e.options,n=e.localType,r=e.attributeName,o=e.quickFilterStream$;return(0,i.compose)((0,i.withProps)({quickFilterStream$:o,attributeName:r,options:t}),it)((0,tt.Q)(n,{name:r}))},ct=(0,i.compose)((0,i.mapPropsStream)((function(e){return e.map((function(t){return rt(rt({},t),{},{quickFilterStream$:e.pluck("quickFilters").distinctUntilChanged()})}))}))),lt=(0,i.compose)(ct,(0,i.withPropsOnChange)(["describeFeatureType","options"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.describeFeatureType,n=e.options,r=e.quickFilterStream$;return t?{filterRenderers:(0,Z.Lo)(t).reduce((function(e,t){var o=t.localType,i=t.name,a=at({options:n,localType:o,attributeName:i,quickFilterStream$:r});return rt(rt({},e),{},ot({},i,a))}),{})}:{}}))),ut=n(30029),st=n(93358),ft=(0,Re.Z)((0,ke.Z)((function(e){return!e.describeFeatureType}))(st.Z));const pt=lt((function(e){var t=e.id,n=e.title,r=e.loading,i=e.confirmDelete,a=void 0!==i&&i,c=e.enableColumnFilters,l=void 0!==c&&c,u=e.headerStyle,s=e.icons,f=e.topRightItems,p=e.toggleDeleteConfirm,d=void 0===p?function(){}:p,g=e.onDelete,y=void 0===g?function(){}:g,v=e.gridEvents,b=void 0===v?function(){}:v,m=e.pageEvents,h=void 0===m?{moreFeatures:function(){}}:m,O=e.describeFeatureType,w=e.filterRenderers,j=e.columnSettings,P=e.features,S=e.size,E=e.pages,D=e.error,C=e.pagination,x=void 0===C?{}:C,T=e.dataGrid,k=void 0===T?{}:T,R=e.virtualScroll,I=void 0===R||R;return o().createElement(We,{id:"widget-chart-".concat(t),title:n,headerStyle:u,icons:s,isDraggable:k.isDraggable,confirmDelete:a,onDelete:y,toggleDeleteConfirm:d,topRightItems:f},o().createElement(Ze.Z,{footer:x.totalFeatures?o().createElement("div",{style:{height:"30px",overflow:"hidden"}},r?o().createElement("span",{style:{float:"right"}},o().createElement($e.Z,null)):null,void 0===D&&o().createElement("span",{style:{float:"left",margin:"5px"}},o().createElement(Me.Z,{msgId:"featuregrid.resultInfoVirtual",msgParams:{total:x.totalFeatures}}))):null},o().createElement(ft,{emptyRowsView:function(){return o().createElement(ut.Z,{loading:r},o().createElement(He.Z,{messageId:"featuregrid.noFeaturesAvailable",glyph:"features-grid"}))},gridEvents:b,sortable:!0,defaultSize:!1,columnSettings:j,pageEvents:h,virtualScroll:I,enableColumnFilters:l,filterRenderers:w,features:P,pages:E,error:D,size:S,rowKey:"id",describeFeatureType:O,pagination:x})))}));var dt=n(80844),gt=["id","title","description","data","series","loading","showTable","confirmDelete","headerStyle","icons","topRightItems","dataGrid","toggleTableView","toggleDeleteConfirm","onDelete"];function yt(){return yt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yt.apply(this,arguments)}var vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.showTable,n=e.toggleTableView,r=void 0===n?function(){}:n;return t?o().createElement(je.Glyphicon,{onClick:function(){r()},glyph:"arrow-left pull-left"}):null},bt=n(46173),mt=n(70919),ht=["toggleDeleteConfirm","id","title","icons","headerStyle","confirmDelete","topRightItems","dataGrid","onDelete"];function Ot(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var wt=(0,bt.Z)()(mt.Z),jt=(0,i.compose)(J.Z,U.Z,$.Z,O.Z,u)((function(e){var t=e.id,n=e.title,r=e.description,i=e.headerStyle,a=e.data,c=void 0===a?[]:a,l=e.series,u=void 0===l?[]:l,s=e.loading,f=e.icons,p=e.showTable,d=e.topRightItems,g=e.confirmDelete,y=void 0!==g&&g,v=e.dataGrid,b=void 0===v?{}:v,m=e.onDelete,h=void 0===m?function(){}:m,O=e.toggleTableView,w=void 0===O?function(){}:O,j=e.toggleDeleteConfirm,P=void 0===j?function(){}:j,S=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Ne);return o().createElement(We,{id:"widget-chart-".concat(t),headerStyle:i,isDraggable:b.isDraggable,title:n,icons:f,topLeftItems:Ge({loading:s,title:n,description:r,showTable:p,toggleTableView:w}),confirmDelete:y,onDelete:h,toggleDeleteConfirm:P,topRightItems:d},p?o().createElement(xe,ze({data:c},S)):o().createElement(_e,ze({id:t,isAnimationActive:!s,loading:s,data:c,series:u,iconFit:!0},S)))})),Pt=(0,i.compose)(m)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.toggleDeleteConfirm,n=void 0===t?function(){}:t,r=e.icons,i=e.topLeftItems,a=e.id,c=e.title,l=e.text,u=e.headerStyle,s=e.topRightItems,f=e.dataGrid,p=void 0===f?{}:f,d=e.confirmDelete,g=void 0!==d&&d,y=e.onDelete,v=void 0===y?function(){}:y;return o().createElement(We,{id:"widget-text-".concat(a),title:c,confirmDelete:g,onDelete:v,toggleDeleteConfirm:n,headerStyle:u,isDraggable:p.isDraggable,icons:r,topLeftItems:i,topRightItems:s},o().createElement(Be,{text:l}))})),St=(0,i.compose)(J.Z,Oe,we("center"),we("zoom"),de,h)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.updateProperty,n=void 0===t?function(){}:t,r=e.toggleDeleteConfirm,i=void 0===r?function(){}:r,a=e.id,c=e.title,l=e.map,u=e.icons,s=e.hookRegister,f=e.mapStateSource,p=e.topRightItems,d=e.confirmDelete,g=void 0!==d&&d,y=e.loading,v=void 0!==y&&y,b=e.dataGrid,m=void 0===b?{}:b,h=e.onDelete,O=void 0===h?function(){}:h,w=e.headerStyle,j=e.env,P=l.size,S=P.height,E=P.width,D=l.mapInfoControl,C=S>400&&E>400&&D;return o().createElement(We,{id:"widget-text-".concat(a),title:c,confirmDelete:g,onDelete:O,toggleDeleteConfirm:i,headerStyle:w,icons:u,topRightItems:p,isDraggable:m.isDraggable},o().createElement(Ze.Z,{footer:o().createElement("div",{style:{height:"30px",overflow:"hidden"}},v?o().createElement("span",{style:{float:"right"}},o().createElement($e.Z,null)):null)},o().createElement(et,{tools:C?["popup"]:[],updateProperty:n,id:a,map:Ye({},Ue()(l,"mapStateSource")),mapStateSource:f,hookRegister:s,layers:l&&l.layers,options:{style:{margin:10,height:"calc(100% - 20px)"}},env:j})))})),Et=(0,i.compose)(J.Z,$.Z,U.Z,q,v)(pt),Dt=(0,i.compose)(J.Z,U.Z,$.Z,w.Z,s)((function(e){var t=e.id,n=e.title,r=e.description,i=e.data,a=void 0===i?[]:i,c=e.series,l=void 0===c?[]:c,u=e.loading,s=e.showTable,f=e.confirmDelete,p=void 0!==f&&f,d=e.headerStyle,g=e.icons,y=e.topRightItems,v=e.dataGrid,b=void 0===v?{}:v,m=e.toggleTableView,h=void 0===m?function(){}:m,O=e.toggleDeleteConfirm,w=void 0===O?function(){}:O,j=e.onDelete,P=void 0===j?function(){}:j,S=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,gt);return o().createElement(We,{className:"counter-widget",id:"widget-chart-".concat(t),title:n,isDraggable:b.isDraggable,icons:g,topLeftItems:vt({loading:u,title:n,description:r,showTable:s,toggleTableView:h}),confirmDelete:p,onDelete:P,toggleDeleteConfirm:w,headerStyle:d,topRightItems:y},o().createElement(dt.Z,yt({id:t,isAnimationActive:!u,loading:u,data:a,series:l,iconFit:!0},S)))})),Ct=(0,i.compose)(J.Z,b.Z)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.toggleDeleteConfirm,n=void 0===t?function(){}:t,r=e.id,i=e.title,a=e.icons,c=e.headerStyle,l=e.confirmDelete,u=void 0!==l&&l,s=e.topRightItems,f=e.dataGrid,p=void 0===f?{}:f,d=e.onDelete,g=void 0===d?function(){}:d,y=Ot(e,ht);return o().createElement(We,{id:"widget-text-".concat(r),title:i,confirmDelete:u,onDelete:g,toggleDeleteConfirm:n,headerStyle:c,icons:a,topRightItems:s,isDraggable:p.isDraggable},o().createElement(wt,y))})),xt=["dependencies","toggleCollapse","exportCSV","exportImage","onDelete","onEdit"];function Tt(){return Tt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tt.apply(this,arguments)}function kt(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const Rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dependencies,n=e.toggleCollapse,r=void 0===n?function(){}:n,i=e.exportCSV,a=void 0===i?function(){}:i,c=e.exportImage,l=void 0===c?function(){}:c,u=e.onDelete,s=void 0===u?function(){}:u,f=e.onEdit,p=void 0===f?function(){}:f,d=kt(e,xt);return"text"===d.widgetType?o().createElement(Pt,Tt({},d,{toggleCollapse:r,onDelete:s,onEdit:p})):"table"===d.widgetType?o().createElement(Et,Tt({},d,{toggleCollapse:r,exportCSV:a,dependencies:t,onDelete:s,onEdit:p})):"counter"===d.widgetType?o().createElement(Dt,Tt({},d,{toggleCollapse:r,dependencies:t,onDelete:s,onEdit:p})):"map"===d.widgetType?o().createElement(St,Tt({},d,{toggleCollapse:r,dependencies:t,onDelete:s,onEdit:p})):"legend"===d.widgetType?o().createElement(Ct,Tt({},d,{toggleCollapse:r,dependencies:t,onDelete:s,onEdit:p})):o().createElement(jt,Tt({},d,{toggleCollapse:r,exportCSV:a,dependencies:t,exportImage:l,onDelete:s,onEdit:p}))}},88395:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>z});var r=n(2822),o=n.n(r),i=n(89731),a=n.n(i),c=n(37632),l=n.n(c),u=n(57546),s=n.n(u),f=n(54432),p=n.n(f),d=n(31476),g=n.n(d),y=n(10511),v=n.n(y),b=n(59088),m=n.n(b),h=n(57579),O=n(81808),w=n(25958),j=n(80416),P=n(75110),S=n(24684),E=n(69293),D=n(55927),C=n(87392),x=n(27565),T=n(89077),k=n(62288),R=n.n(k),I=n(9938),A=n.n(I);function F(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var W=function(e){return e.ofType(E.WC,E.a3,E.W5).startWith({type:O.ok}).switchMap((function(t){return t.type===E.WC?o().Observable.never():e})).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type;return t===C.nk}))},N=function(e,t,n,r){return o().Observable.of((0,h.Rz)("mapSync",e),(0,h.Rz)("dependenciesMap",function(e,t,n){var r,o=n.dependenciesMap,i=n.mappings,c=["layer","filter","quickFilters","options"],l=["layers","viewport","zoom","center"],u=(h.oU.exec(t)||[])[1],s=m()(o,(function(e){return-1===e.indexOf(u)})),f=Object.keys(i).filter((function(e){return void 0!==i[e]})).reduce((function(e,n){return!a()(t,"map")&&p()(c,n)?Z(Z({},e),{},L({},n,"".concat(t,".").concat(i[n]))):a()(t,"map")?p()(l,n)?Z(Z({},e),{},L({},n,"map"===t?i[n]:"".concat(t,".").concat(i[n]))):Z(Z({},e),{},L({},n,"".concat(t.replace(".map",""),".").concat(i[n]))):e}),{});return e?Z(Z(Z({},s),f),{},(L(r={},"dependenciesMap","".concat(t.replace(".map",""),".dependenciesMap")),L(r,"mapSync","".concat(t.replace(".map",""),".mapSync")),r)):v()(s,[Object.keys(i)])}(e,t,n)))};const z={exportWidgetData:function(e){return e.ofType(h.Km).do((function(e){var t=e.data,n=void 0===t?[]:t,r=e.title,o=void 0===r?"data":r;return R().json2csv(n,(function(e,t){return e?null:(0,x.saveAs)(new Blob([t],{type:"text/csv"}),o+".csv")}))})).filter((function(){return!1}))},alignDependenciesToWidgets:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return e.ofType(O.ok,D.E9,h.Jm).map((function(){return(0,w.jx)(r())})).pluck("availableDependencies").distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return g()(F(e),F(t))})).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,h._k)(e.reduce((function(e,t){var n,r,o=t.replace(".map","");return a()(t,"map")?Z(Z({},e),{},(L(n={},"".concat(o,".dependenciesMap"),"".concat(o,".dependenciesMap")),L(n,"".concat(o,".mapSync"),"".concat(o,".mapSync")),L(n,"map"===t?"viewport":"".concat(t,".viewport"),"".concat(t,".bbox")),L(n,"map"===t?"center":"".concat(t,".center"),"".concat(t,".center")),L(n,"map"===t?"zoom":"".concat(t,".zoom"),"".concat(t,".zoom")),L(n,"map"===t?"layers":"".concat(t,".layers"),"map"===t?"layers.flat":"".concat(t,".layers")),n)):Z(Z({},e),{},(L(r={},"".concat(t,".filter"),"".concat(t,".filter")),L(r,"".concat(t,".quickFilters"),"".concat(t,".quickFilters")),L(r,"".concat(o,".dependenciesMap"),"".concat(o,".dependenciesMap")),L(r,"".concat(o,".mapSync"),"".concat(o,".mapSync")),L(r,"".concat(t,".layer"),"".concat(t,".layer")),L(r,"".concat(t,".options"),"".concat(t,".options")),r))}),{}))}))},toggleWidgetConnectFlow:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return e.ofType(h.LH).switchMap((function(t){var n=t.active,i=t.availableDependencies,a=void 0===i?[]:i,c=t.options;return n&&a.length>0?1===a.length?N(n,a[0],c):o().Observable.of((0,h.kr)(n,{availableDependencies:a})).merge(e.ofType(h.V5).filter((function(){return(0,w.xI)(r())})).switchMap((function(e){var t=e.widget,i=s()((0,w.r0)(r()),"availableDependencies").filter((function(e){return(h.oU.exec(e)||[])[1]===t.id}));return N(n,i[0],c,t.dependeciesMap).concat(o().Observable.of((0,h.kr)(!1,{})))})).takeUntil(e.ofType(C.nk).merge(e.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,n=e.key;return t===h.Cz&&n===h.jv}))))):N(n,a[0],c)}))},clearWidgetsOnLocationChange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return e.ofType(O.ok).switchMap((function(){var t=(0,S.F)(r()).split("/"),n=t[t.length-1];return e.let(W).filter((function(){var e=(0,S.F)(r()).split("/");return e[e.length-1]!==n})).switchMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload,n=void 0===t?{}:t;return n&&n.location&&n.location.pathname?o().Observable.of((0,h.K4)()):o().Observable.empty()}))}))},exportWidgetImage:function(e){return e.ofType(h.pV).do((function(e){var t,n,r=e.widgetDivId,o=e.title,i=void 0===o?"data":o,a=document.createElement("canvas"),c=document.querySelector("#".concat(r," .recharts-wrapper svg")),l=c.outerHTML?c.outerHTML:(t=c,(n=document.createElement("div")).appendChild(t.cloneNode(!0)),n.innerHTML);A()(a,l,{renderCallback:function(){var e=a.getContext("2d");e.globalCompositeOperation="destination-over",e.fillStyle="#fff",e.fillRect(0,0,a.width,a.height),(0,T.RP)(a.toDataURL("image/jpeg",1),"".concat(i,".jpg"),"image/jpeg")}})})).filter((function(){return!1}))},updateLayerOnLayerPropertiesChange:function(e,t){return e.ofType(j.yS).switchMap((function(e){var n,r=e.layer,i=e.newProperties,a=t.getState(),c=(0,P.CA)(a,r);return(n=o().Observable).of.apply(n,F(l()(i,"layerFilter")&&c?[(0,h.Ko)(c)]:[]))}))},updateLayerOnLoadingErrorChange:function(e,t){return e.ofType(j.x9,j.vs).groupBy((function(e){return e.layerId})).map((function(e){return e.switchMap((function(e){var n,r=e.layerId,i=t.getState(),a=(0,P.CA)(i,r);return(n=o().Observable).of.apply(n,F(a&&a.previousLoadingError!==a.loadingError?[(0,h.Ko)(a)]:[]))}))})).mergeAll()}}},88495:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ne});var r=n(21413),o=n.n(r),i=n(75263),a=n.n(i),c=n(74277),l=n(87511),u=n(95437),s=n(22843),f=n(827),p=n(25958),d=n(57579),g=n(10473),y=n(54414),v=n(99171),b=n(38482);function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m.apply(this,arguments)}var h=n(50542),O=n.n(h),w=n(29976),j=n.n(w),P=n(22790),S=n(57546),E=n.n(S),D=n(20721),C=n.n(D);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R=function(e){return E()(C()(e,(function(e){return e.color})),"color")};const I=(0,u.withProps)((function(e){var t=e.groups,n=e.showGroupColor,r=e.headerStyle,o=void 0===r?{borderTop:"3px solid rgba(0,0,0,0)",transition:"border-color .5s ease-out"}:r;return{headerStyle:n&&t&&R(t)?T(T({},o),{},{borderTop:"3px solid ".concat(R(t))}):o}}));n(94257);var A=["id","style","className","toolsOptions","rowHeight","breakpoints","cols","widgets","layouts","dependencies","verticalCompact","compactMode","useDefaultWidthProvider","measureBeforeMount","width","showGroupColor","groups","canEdit","getWidgetClass","onWidgetClick","updateWidgetProperty","deleteWidget","toggleCollapse","toggleMaximize","editWidget","onLayoutChange","language","env"];function F(){return F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},F.apply(this,arguments)}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){Z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var W=(0,u.branch)((function(e){var t=e.useDefaultWidthProvider;return void 0===t||t}),P.WidthProvider)(P.Responsive),N=I(n(43716).Z),z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.filter((function(e){return O()(e.widgets,(function(e){return e===t.id}))}))};const G=(0,u.pure)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=e.style,r=e.className,i=void 0===r?"":r,a=e.toolsOptions,c=void 0===a?{}:a,l=e.rowHeight,u=void 0===l?208:l,s=e.breakpoints,f=void 0===s?{lg:1200,md:996,sm:768,xs:480,xxs:0}:s,p=e.cols,d=void 0===p?{lg:6,md:6,sm:4,xs:2,xxs:1}:p,g=e.widgets,y=void 0===g?[]:g,v=e.layouts,b=e.dependencies,m=e.verticalCompact,h=void 0!==m&&m,w=e.compactMode,P=e.useDefaultWidthProvider,S=void 0===P||P,E=e.measureBeforeMount,D=e.width,C=e.showGroupColor,x=e.groups,T=void 0===x?[]:x,k=e.canEdit,R=void 0===k||k,I=e.getWidgetClass,_=void 0===I?function(){}:I,Z=e.onWidgetClick,G=void 0===Z?function(){}:Z,V=e.updateWidgetProperty,H=void 0===V?function(){}:V,B=e.deleteWidget,q=void 0===B?function(){}:B,U=e.toggleCollapse,$=void 0===U?function(){}:U,J=e.toggleMaximize,K=void 0===J?function(){}:J,Q=e.editWidget,Y=void 0===Q?function(){}:Q,X=e.onLayoutChange,ee=void 0===X?function(){}:X,te=e.language,ne=e.env,re=L(e,A),oe=y.filter((function(e){var t=e.mapSync,n=e.dependenciesMap;return t&&n})).map((function(e){return e.dependenciesMap})),ie=function(e){return"table"===e.widgetType&&oe.filter((function(t){return Object.keys(t).filter((function(n){return t[n]&&-1!==t[n].indexOf(e.id)})).length>0})).length>0};return o().createElement(W,{key:t||"widgets-view",useDefaultWidthProvider:S,measureBeforeMount:E,width:S?void 0:D,isResizable:R,isDraggable:R,draggableHandle:".draggableHandle",onLayoutChange:ee,preventCollision:!0,style:n,className:"widget-container ".concat(i," ").concat(R?"":"no-drag"),rowHeight:u,autoSize:!0,verticalCompact:h,compactMode:w,breakpoints:f,cols:d,layouts:v?JSON.parse(JSON.stringify(j()(v,(function(e){return e.map((function(e){var t=O()(y,{id:e.i});return t?M(M({},e),{},{isResizable:t.dataGrid&&t.dataGrid.isResizable,isDraggable:t.dataGrid&&t.dataGrid.isDraggable,static:t.dataGrid&&t.dataGrid.static}):e}))})))):void 0},y.map((function(e){return o().createElement("div",{key:e.id,"data-grid":e.dataGrid,onClick:function(){return G(e)},className:_(e)},o().createElement(N,F({"data-grid":e.dataGrid},re,e,{quickFilters:ie(e)?e.quickFilters:void 0,toolsOptions:c,groups:z(T,e),showGroupColor:C,dependencies:b,enableColumnFilters:ie(e),canEdit:R,updateProperty:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return H.apply(void 0,[e.id].concat(n))},toggleCollapse:function(){return $(e)},toggleMaximize:function(){return K(e)},onDelete:function(){return q(e)},onEdit:function(){return Y(e)},language:te,env:ne})))})))}));function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function H(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e,t){return q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},q(e,t)}function U(e,t){if(t&&("object"===V(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function $(e){return $=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},$(e)}function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){Q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Y,X=(0,u.compose)((0,c.connect)((0,l.P1)(f.J9,p.E5,p.p,p.Jb,p.h9,(function(e,t,n,r,o){return{id:e,widgets:t,layouts:n,maximized:r,dependencies:o}})),{editWidget:d.uT,updateWidgetProperty:d.Ij,exportCSV:d.sD,toggleCollapse:d.f,toggleMaximize:d.Pt,exportImage:d.Rb,deleteWidget:d.E9,onLayoutChange:d.c_}),(0,u.compose)((Y={debounceTime:20,closest:!0,querySelector:".fill"},(0,u.compose)((0,u.withStateHandlers)((function(){return{}}),{onResize:function(){return function(e){return{height:e.height}}}}),(0,b.Z)(Y))),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.overrideWidthProvider;return(0,u.compose)((0,u.defaultProps)({useDefaultWidthProvider:!t}),(function(e){return function(t){return o().createElement(v.Z,{handleWidth:!0},(function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.width;return o().createElement(e,m({width:r},t))}))}}))}({overrideWidthProvider:!1}),(0,u.withProps)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,n=e.height,r=e.maximized,o=n-120,i=4,a=Math.floor(o/i-20),c=null!=r&&r.widget?{width:"100%",height:"100%",marginTop:0,bottom:"auto",top:0,left:0,zIndex:1330}:{},l=null!=r&&r.widget?{width:t,useDefaultWidthProvider:!1,rowHeight:n-50,breakpoints:{xxs:0},cols:{xxs:1}}:{},u=t&&t>800?t-570:t-70,s=t?{width:u-1}:{};return K(K({rowHeight:a,className:"on-map",breakpoints:{md:480,xxs:0},cols:{md:6,xxs:1}},s),{},{useDefaultWidthProvider:!1,style:K({left:t&&t>800?"500px":"0",marginTop:52,bottom:65,height:Math.floor((n-100)/(a+10))*(a+10),width:u+"px",position:"absolute",zIndex:50},c)},l)}))),(0,u.compose)((0,u.defaultProps)({toolsOptions:{showPin:"user.role===ADMIN",seeHidden:"user.role===ADMIN",showHide:!1,showCollapse:!0,showMaximize:!0}}),(0,g.Z)("toolsOptions",{asObject:!0}),(0,u.compose)((0,c.connect)((0,l.P1)(p.Xu,(function(e){return{tray:e}}))),(0,u.withPropsOnChange)(["toolsOptions","tray"],(function(e){var t=e.toolsOptions,n=e.tray;return{toolsOptions:t?K(K({},t),{},{showCollapse:t.showCollapse&&n}):t}}))),(0,u.withPropsOnChange)(["widgets","toolsOptions"],(function(e){var t=e.widgets,n=void 0===t?[]:t,r=e.toolsOptions,o=void 0===r?{}:r;return{widgets:n.filter((function(e){return!e.hide||o.seeHidden}))}}))))(G),ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&q(e,t)}(c,e);var t,n,r,i,a=(r=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=$(r);if(i){var n=$(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return U(this,e)});function c(){return H(this,c),a.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){return this.props.enabled?o().createElement(X,this.props):null}}])&&B(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(o().Component);Q(ee,"propTypes",{enabled:a().bool}),Q(ee,"defaultProps",{enabled:!0});var te=(0,y.Z)(ee);const ne=(0,s.rx)("WidgetsPlugin",{component:te,containers:{TOC:{doNotHide:!0,name:"Widgets"}},reducers:{widgets:n(75859).Z},epics:n(88395).ZP})},54414:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(87511),o=n(74277),i=n(55105),a=n(93152);const c=(0,o.connect)((0,r.P1)(i.Jz,i.VM,a.c0,(function(e,t,n){return{enabled:!e&&!t&&!n}})))},10473:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var r=n(95437),o=n(74277),i=n(87511),a=n(827),c=n(74621),l=n(57546),u=n.n(l),s=n(9626),f=n.n(s),p=n(29976),d=n.n(p),g=n(37153),y=n.n(g),v=n(80643),b=n.n(v);function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function e(t){var n=t.accessInfo,r=t.postProcessValue,o=t.reduceFun;return function(t){var i=f()(t),a=o;return i.length>1&&"__OR__"===i[0]&&(a=function(e,t){return e||t},i=i.slice(1)),i.map((function(t){var i=t;if(b()(i))return e({accessInfo:n,postProcessValue:r,reduceFun:o})(i);var a=!1;i&&y()(i)&&i.startsWith("!")&&(a=!0,i=i.substr(1));var c=function(e){return a?!e:e},l=y()(i)&&i.split(":");if(l&&l[0]){var s=l[0].split(/\!\=\=?/),f=l[0].split(/\=\=?\=?/);return s.length>1?c(r(u()(n,s[0]),i)!==s[1]):f.length>1?c(r(u()(n,f[0]),i)===f[1]):c(r(u()(n,l[0]),i))}return i})).reduce(a||function(e,t){return e&&t})}};const O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.asObject,o=void 0!==n&&n,i=t.postProcessValue,a=void 0===i?function(e){return e}:i,c=t.reduceFun,l=t.accessInfo,u=void 0===l?"accessInfo":l;return(0,r.withPropsOnChange)([e,u],(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m({},e,o?d()(t[e],h({accessInfo:t[u],postProcessValue:a,reduceFun:c})):h({accessInfo:t[u],postProcessValue:a,reduceFun:c})(t[e]))}))},w=function(){return(0,r.compose)((0,o.connect)((0,i.P1)(a.J9,a._H,c.np,(function(e,t,n){return{accessInfo:{mapId:e,mapInfo:t,user:n}}}))),O.apply(void 0,arguments))}},75859:(e,t,n)=>{"use strict";n.d(t,{Z:()=>C});var r=n(57579),o=n(81808),i=n(55927),a=n(37295),c=n.n(a),l=n(3569),u=n.n(l),s=n(57546),f=n.n(s),p=n(50542),d=n.n(p),g=n(10511),y=n.n(g),v=n(29976),b=n.n(v),m=n(9626),h=n.n(m),O=n(61868);function w(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D={dependencies:{viewport:"map.bbox",center:"map.center",zoom:"map.zoom"},containers:{floating:{widgets:[]}},builder:{settings:{step:0}}};const C=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case r.Cz:return u()("builder.settings.".concat(n.key),n.value,t);case r.n8:return u()("builder.editor",n.widget,u()("builder.settings",n.settings||D.settings,t));case r.dm:return u()("builder.editor",S(S({},n.widget),{},{widgetType:n.widget&&n.widget.widgetType||"chart"}),u()("builder.settings.step","chart"===(n.widget&&n.widget.widgetType||"chart")?1:0,t));case r.BV:return u()("builder.editor.".concat(n.key),n.value,t);case r.Jm:var a=(0,O.vy)("containers[".concat(n.target,"].widgets"),S(S({id:n.id},n.widget),{},{dataGrid:n.id&&{y:0,x:0,w:1,h:1}}),{id:n.widget.id||n.id},t);return a;case r.$A:var l=d()(f()(t,"containers[".concat(n.target,"].widgets")),{id:n.id});return(0,O.vy)("containers[".concat(n.target,"].widgets"),u()(n.key,"merge"===n.mode?c()({},l[n.key],n.value):n.value,l),{id:n.id},t);case r.eb:if(n.layer){var s=f()(t,"containers[".concat(r.VR,"].widgets"));if(s)return u()("containers[".concat(r.VR,"].widgets"),s.map((function(e){return f()(e,"layer.id")===n.layer.id?u()("layer",n.layer,e):e})),t)}return t;case r.yY:return(0,O.z6)("containers[".concat(n.target,"].widgets"),{id:n.widget.id},t);case i.E9:var p=n.data;return u()("containers[".concat(r.VR,"]"),S({},p),t);case o.ok:var g=n.config||{},v=g.widgetsConfig;return u()("containers[".concat(r.VR,"]"),S({},v),t);case r.v8:return u()("containers[".concat(n.target,"].layout"),n.layout)(u()("containers[".concat(n.target,"].layouts"),n.allLayouts,t));case r.ff:case i.R4:return u()("containers[".concat(r.VR,"]"),D.containers[r.VR],t);case r.S0:var m=n.key,j=n.value;return u()("dependencies[".concat(m,"]"),j,t);case r.Q6:var P=n.key;return u()("dependencies[".concat(P,"]"),null,t);case r.kb:var E=n.dependencies;return u()("dependencies",E,t);case r.GV:return u()("dependencies",D.dependencies,t);case r.Ym:var C=n.widget,x=void 0===C?{}:C;if(x.dataGrid&&x.dataGrid.static)return t;var T=f()(t,"containers[".concat(n.target,"].collapsed[").concat(x.id));if(T){var k=[].concat(w(f()(t,"containers[".concat(n.target,"].layout"),[])),w(h()(f()(T,"layout",[])))),R=b()(f()(t,"containers[".concat(n.target,"].layouts"),{}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return[].concat(w(e),w(h()(f()(T,"layouts[".concat(t,"]"),[]))))}));return y()((0,O.qC)(u()("containers[".concat(n.target,"].layout"),k),u()("containers[".concat(n.target,"].layouts"),R))(t),"containers[".concat(n.target,"].collapsed[").concat(x.id,"]"))}return u()("containers[".concat(n.target,"].collapsed[").concat(x.id,"]"),{layout:d()(f()(t,"containers[".concat(n.target,"].layout"),[]),{i:x.id}),layouts:b()(f()(t,"containers[".concat(n.target,"].layouts"),{}),(function(e){return d()(e,{i:x.id})}))},t);case r.ke:var I,A,F,_,M,Z,L,W,N,z,G,V,H,B,q,U,$,J,K=n.widget,Q=null==t||null===(I=t.containers)||void 0===I||null===(A=I[n.target])||void 0===A?void 0:A.maximized;if(!K||null!==(F=K.dataGrid)&&void 0!==F&&F.static)return t;if(null!=Q&&Q.widget)return(0,O.qC)(u()("containers[".concat(n.target,"].layout"),Q.layout),u()("containers[".concat(n.target,"].layouts"),Q.layouts),u()("containers[".concat(n.target,"].maximized"),{}),u()("containers[".concat(n.target,"].widgets"),null==t||null===(U=t.containers)||void 0===U||null===($=U[n.target])||void 0===$||null===(J=$.widgets)||void 0===J?void 0:J.map((function(e){return e.id===Q.widget.id?S(S({},e),{},{dataGrid:S(S({},e.dataGrid),{},{isDraggable:!0,isResizable:!0})}):e}))))(t);if(null!=t&&null!==(_=t.containers)&&void 0!==_&&null!==(M=_[n.target])&&void 0!==M&&null!==(Z=M.collapsed)&&void 0!==Z&&Z[K.id])return t;var Y={x:0,y:0,w:1,h:1},X=d()(null==t||null===(L=t.containers)||void 0===L||null===(W=L[n.target])||void 0===W?void 0:W.layout,{i:K.id}),ee=S(S({},X),Y);return(0,O.qC)(u()("containers[".concat(n.target,"].maximized"),{widget:K,layout:null==t||null===(N=t.containers)||void 0===N||null===(z=N[n.target])||void 0===z?void 0:z.layout,layouts:null==t||null===(G=t.containers)||void 0===G||null===(V=G[n.target])||void 0===V?void 0:V.layouts}),u()("containers[".concat(n.target,"].layout"),[ee]),u()("containers[".concat(n.target,"].layouts"),{xxs:[ee]}),u()("containers[".concat(n.target,"].widgets"),null==t||null===(H=t.containers)||void 0===H||null===(B=H[n.target])||void 0===B||null===(q=B.widgets)||void 0===q?void 0:q.map((function(e){return e.id===K.id?S(S({},e),{},{dataGrid:S(S({},e.dataGrid),{},{isDraggable:!1,isResizable:!1})}):e}))))(t);case r.uU:var te=f()(t,"containers[".concat(n.target,"].widgets"),[]).filter((function(e){return!e.dataGrid||!e.dataGrid.static})),ne=te.filter((function(e){return f()(t,"containers[".concat(n.target,"].collapsed[").concat(e.id,"]"))})),re=te.filter((function(e){return!f()(t,"containers[".concat(n.target,"].collapsed[").concat(e.id,"]"))})),oe=0===re.length;return oe?ne.reduce((function(t,n){return e(t,(0,r.f)(n))}),t):re.length>0?re.reduce((function(t,n){return e(t,(0,r.f)(n))}),t):t;case r.nw:return u()("tray",n.value,t);default:return t}}},67306:(e,t,n)=>{"use strict";n.d(t,{Wy:()=>i,i$:()=>a,P0:()=>c});var r=n(87511),o=n(24684),i=function(e){return e&&e.dashboard&&e.dashboard.editor&&e.dashboard.editor.available},a=function(e){return e&&e.dashboard&&e.dashboard.editing},c=function(e){return e&&e.dashboard&&e.dashboard.showConnections};(0,r.P1)(o.F,(function(e){return e&&e.dashboard&&e.dashboard.resource}),(function(e){return e&&e.browser&&e.browser.mobile}),(function(e,t,n){return n?!n:t&&t.canEdit||isNaN(e.substr(-4))}))},25958:(e,t,n)=>{"use strict";n.d(t,{zA:()=>G,jx:()=>z,h9:()=>K,YR:()=>L,lF:()=>_,r0:()=>V,YI:()=>I,um:()=>J,E2:()=>T,zm:()=>F,yZ:()=>q,p:()=>B,Jb:()=>M,E5:()=>Z,GW:()=>A,Xu:()=>U,xI:()=>H,Wo:()=>$});var r=n(50542),o=n.n(r),i=n(57546),a=n.n(i),c=n(9626),l=n.n(c),u=n(80643),s=n.n(u),f=n(827),p=n(75110),d=n(24684),g=n(57579),y=(n(77263),n(37422),function(e,t,n){var r,o,i=[],a=[],c=e;for(i.push(c);i.length>0;)if(!n[c=i.shift()])for(n[c]=!0,a.push(c),r=0;r<t.length;r+=1)(o=t[r])[0]!==c||n[o[1]]?o[1]!==c||n[o[0]]||i.push(o[0]):i.push(o[1]);return a}),v=function(e){for(var t={},n=[],r=0,o=e.length;r<o;r+=1){var i=e[r],a=i[0],c=i[1],l=null;t[a]?t[c]||(l=c):l=a,l&&n.push(y(l,e,t))}return n},b=n(43143);function m(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if(e){if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var w=function(e,t){var n,r,i=(n=g.oU.exec(e),r=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(n,r)||h(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[0],c=i[1];return a?o()(t,{id:c}):null},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((function(t,n){var r=a()(n,"mapSync")&&a()(n,"dependenciesMap")||{},o=Object.keys(r).map((function(t){return w(r[t],e)}))||[];return[].concat(m(t),m(o.filter((function(e){return void 0!==e})).map((function(e){return[n.id,e.id]}))))}),[])},P=n(67306),S=n(87511),E=n(84715);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=function(e){return a()(e,"widgets.builder.settings")},k=function(e){return a()(e,"widgets.dependencies")||{}},R=function(e){return Object.keys(k(e)).map((function(t){return k(e)[t]}))},I=function(e){return a()(e,"widgets.builder.editor")},A=(0,S.P1)(I,p.Iz,(function(e){return(0,P.Wy)(e)&&(0,P.i$)(e)}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;return t||!r&&n})),F=function(e){return a()(e,"widgets.containers[".concat(g.VR,"].widgets"))},_=function(e){return a()(e,"widgets.containers[".concat(g.VR,"].collapsed"))},M=function(e){return a()(e,"widgets.containers[".concat(g.VR,"].maximized"))},Z=(0,S.P1)(F,_,M,(function(e,t,n){if(e){if(null!=n&&n.widget)return e.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;return t===n.widget.id}));if(t)return e.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.id;return!t[n]}))}return e})),L=(0,S.P1)(_,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e)})),W=function(e){return(F(e)||[]).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.widgetType;return"map"===t}))},N=function(e){return(F(e)||[]).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.widgetType;return"table"===t}))},z=(0,S.P1)(W,N,f.Od,d.F,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0;return{availableDependencies:e.map((function(e){var t=e.id;return"widgets[".concat(t,"].map")})).concat(l()(n).map((function(){return"map"}))).concat(l()(t).filter((function(){return-1===r.indexOf("viewer")})).map((function(e){var t=e.id;return"widgets[".concat(t,"]")})))}})),G=(0,S.P1)(W,N,f.Od,d.F,I,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,i=o&&"map"!==o.widgetType?o&&o.layer||{}:o&&o.map&&o.map.layers||[];return{availableDependencies:e.map((function(e){var t=e.id;return"widgets[".concat(t,"].map")})).concat(l()(n).map((function(){return n?"map":null}))).filter((function(e){return e})).concat(l()(t).filter((function(){return-1===r.indexOf("viewer")})).filter((function(e){return s()(i)||i.name===e.layer.name})).filter((function(e){return o&&o.id!==e.id})).map((function(e){var t=e.id;return"widgets[".concat(t,"]")})))}})),V=function(e){return a()(T(e),"".concat(g.jv))},H=function(e){return a()(V(e),"active")},B=((0,S.P1)(F,(function(e){return function(){var e=v(j(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[])),t={base:190,range:340,options:{base:10,range:360,s:.67,v:.67}},n=(0,b.qH)(t.base,t.range,e.length+1,t.options);return e.map((function(e,t){return{color:n[t],widgets:e}}))}(e)})),function(e){return a()(e,"widgets.containers[".concat(g.VR,"].layouts"))}),q=function(e){return a()(e,"widgets.containers[".concat(g.VR,"].layout"))},U=function(e){return a()(e,"widgets.tray")},$=function(e){return a()(e,"widgets.builder.editor.returnToFeatureGrid",!1)},J=function(e){return a()(I(e),"filter")},K=(0,E.y)(k,R,(function(e){return R(e).map((function(t){return 0===t.indexOf("map.")?a()((0,f.Od)(e),t.slice(4)):t.match(g.oU)?function(e,t){var n=g.oU.exec(e),r=n&&n[2],o=w(e,t);return r?a()(o,r):o}(t,F(e)):a()(e,t)}))}),(function(e,t,n){return t.reduce((function(t,r,o){return C(C({},t),{},x({},Object.keys(e)[o],n[o]))}),{})}));(0,S.zB)({widgets:F,layouts:B})},89077:(e,t,n)=>{"use strict";n.d(t,{LR:()=>p,RP:()=>d});var r=n(27565),o=n.n(r),i=n(62521),a=n.n(i),c=(n(27342),n(80825),n(41793),n(32681),n(37295),n(91110),n(66023),n(97195),n(55651),n(57546),n(20721),n(29976),n(91131),n(46713),n(69533),n(37632),n(55236),n(84110),n(10511),n(37153),n(90346)),l=n.n(c);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n(50542),n(70475);var f=function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return l()([[[/\&/g,"&amp;"]],e?[]:[[/\"/g,"&quot;"]],t?[]:[[/\'/g,"&apos;"]],n?[]:[[/\>/g,"&gt;"]],r?[]:[[/\</g,"&lt;"]]]).reduce((function(e,t){var n=u(t,2),r=n[0],o=n[1];return e.replace(r,o)}),o)};f.bind(null,!0,!0,!0,!1),f.bind(null,!1,!1,!0,!1),n(24262),n(10525),new DOMParser;var p=function(e,t,n){var r=new Blob([e],{type:n});o().saveAs(r,t)},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"snapshot.png",n=arguments.length>2?arguments[2]:void 0;p(a()(e),t,n)}},72810:()=>{},86799:()=>{}}]);