(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[4135],{80416:(e,t,r)=>{"use strict";r.d(t,{yS:()=>n,Zz:()=>o,ms:()=>a,ih:()=>u,OX:()=>i,sb:()=>c,K$:()=>l,k7:()=>s,cX:()=>p,x9:()=>f,vs:()=>y,oE:()=>h,Po:()=>d,qv:()=>g,cI:()=>v,g6:()=>E,I4:()=>b,l$:()=>O,Xv:()=>m,k3:()=>A,CQ:()=>R,R8:()=>T,HN:()=>S,sH:()=>_,c7:()=>L,_7:()=>D,eF:()=>P,O6:()=>w,ED:()=>H,RP:()=>N,sF:()=>I,VP:()=>Y,He:()=>j,vO:()=>k,WO:()=>x,bh:()=>M,pV:()=>C,MK:()=>G,ZF:()=>F,tV:()=>U,Dv:()=>V,Yz:()=>W,kI:()=>z,XG:()=>Z,A4:()=>q,Rp:()=>B,ct:()=>X,oh:()=>$,$h:()=>K,ud:()=>J,Qr:()=>Q,LR:()=>ee,nN:()=>te,UG:()=>re,F5:()=>ne,c9:()=>oe,Jh:()=>ae,Xy:()=>ue});var n="CHANGE_LAYER_PROPERTIES",o="LAYERS:CHANGE_LAYER_PARAMS",a="CHANGE_GROUP_PROPERTIES",u="TOGGLE_NODE",i="SORT_NODE",c="REMOVE_NODE",l="UPDATE_NODE",s="MOVE_NODE",p="LAYER_LOADING",f="LAYER_LOAD",y="LAYER_ERROR",h="ADD_LAYER",d="ADD_GROUP",g="REMOVE_LAYER",v="SHOW_SETTINGS",E="HIDE_SETTINGS",b="UPDATE_SETTINGS",O="REFRESH_LAYERS",m="LAYERS:UPDATE_LAYERS_DIMENSION",A="LAYERS_REFRESHED",R="LAYERS_REFRESH_ERROR",T="LAYERS:BROWSE_DATA",S="LAYERS:DOWNLOAD",_="LAYERS:CLEAR_LAYERS",L="LAYERS:SELECT_NODE",D="LAYERS:FILTER_LAYERS",P="LAYERS:SHOW_LAYER_METADATA",w="LAYERS:HIDE_LAYER_METADATA",H="LAYERS:UPDATE_SETTINGS_PARAMS";function N(e,t,r){return{type:v,node:e,nodeType:t,options:r}}function I(){return{type:E}}function Y(e){return{type:b,options:e}}function j(e,t){return{type:n,newProperties:t,layer:e}}function k(e,t){return{type:o,layer:e,params:t}}function x(e,t){return{type:a,newProperties:t,group:e}}function M(e,t,r){return{type:u,node:e,nodeType:t,status:!r}}function C(e){return{type:"CONTEXT_NODE",node:e}}function G(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:i,node:e,order:t,sortLayers:r}}function F(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:c,node:e,nodeType:t,removeEmpty:r}}function U(e,t,r){return{type:l,node:e,nodeType:t,options:r}}function V(e,t,r){return{type:s,node:e,groupId:t,index:r}}function W(e){return{type:p,layerId:e}}function z(e,t){return{type:f,layerId:e,error:t}}function Z(e,t,r){return{type:y,layerId:e,tilesCount:t,tilesErrorCount:r}}function q(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{type:h,layer:e,foreground:t}}function B(e,t,r){return{type:d,group:e,parent:t,options:r}}function X(e,t){return{type:n,layer:e,newProperties:{_v_:t||(new Date).getTime()}}}function $(e){return{type:A,layers:e}}function K(e,t){return{type:R,layers:e,error:t}}function J(e,t,r,n){return{type:m,dimension:e,value:t,options:r,layers:n}}function Q(e){return{type:T,layer:e}}function ee(e){return{type:S,layer:e}}function te(){return{type:_}}function re(e,t,r){return{type:L,id:e,nodeType:t,ctrlKey:r}}function ne(e){return{type:D,text:e}}function oe(e,t){return{type:P,metadataRecord:e,maskLoading:t}}function ae(){return{type:w}}function ue(e,t){return{type:H,newParams:e,update:t}}},90079:(e,t,r)=>{"use strict";r.d(t,{Z:()=>T});var n=r(31940),o=r.n(n),a=r(80643),u=r.n(a),i=r(37295),c=r.n(i),l=r(75263),s=r.n(l),p=r(21413),f=r.n(p),y=r(33044),h=r(5346);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function E(e,t){return E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},E(e,t)}function b(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return O(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function A(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&E(e,t)}(l,e);var t,r,n,a,i=(n=l,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=m(n);if(a){var r=m(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return b(this,e)});function l(){var e;g(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return A(O(e=i.call.apply(i,[this].concat(r))),"state",{error:!1}),A(O(e),"onImgError",(function(){e.setState((function(){return{error:!0}}))})),A(O(e),"getUrl",(function(e,t){if(e.layer&&"wms"===e.layer.type&&e.layer.url){var r=e.layer,n=t||u()(r.url)&&Math.floor(Math.random()*r.url.length),a=u()(r.url)?r.url[n]:r.url.replace(/[?].*$/g,""),i=o().parse(a),l=(0,y.clearNilValuesForParams)(r.params),s=c()({},{service:"WMS",request:"GetLegendGraphic",format:"image/png",height:e.legendHeight,width:e.legendWidth,layer:r.name,style:r.style||null,version:r.version||"1.3.0",SLD_VERSION:"1.1.0",LEGEND_OPTIONS:e.legendOptions},r.legendParams||{},e.language&&r.localizedLayerStyles?{LANGUAGE:e.language}:{},(0,y.addAuthenticationToSLD)(l||{},e.layer),l&&l.SLD_BODY?{SLD_BODY:l.SLD_BODY}:{},e.scales&&e.currentZoomLvl&&e.scaleDependent?{SCALE:Math.round(e.scales[e.currentZoomLvl])}:{});return(0,y.addAuthenticationParameter)(a,s),o().format({host:i.host,protocol:i.protocol,pathname:i.pathname,query:s})}return""})),A(O(e),"validateImg",(function(t){t.height<=1&&t.width<=2&&e.onImgError()})),e}return t=l,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.state.error&&this.getUrl(e,0)!==this.getUrl(this.props,0)&&this.setState((function(){return{error:!1}}))}},{key:"render",value:function(){var e=this;return!this.state.error&&this.props.layer&&"wms"===this.props.layer.type&&this.props.layer.url?f().createElement("img",{onError:this.onImgError,onLoad:function(t){return e.validateImg(t.target)},src:this.getUrl(this.props),style:this.props.style}):f().createElement(h.Z,{msgId:"layerProperties.legenderror"})}}])&&v(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(f().Component);A(R,"propTypes",{layer:s().object,legendHeight:s().number,legendWidth:s().number,legendOptions:s().string,style:s().object,currentZoomLvl:s().number,scales:s().array,scaleDependent:s().bool,language:s().string}),A(R,"defaultProps",{legendHeight:12,legendWidth:12,legendOptions:"forceLabels:on",style:{maxWidth:"100%"},scaleDependent:!0});const T=R},25382:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(2822),o=r.n(n),a=r(86850),u=r(24262);const i=function(e){return e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.layer;return(0,u.Tt)(t)===(0,u.Tt)(n)&&t.loadingError===n.loadingError})).switchMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer;return(0,a.v$)({layer:t}).map((function(e){return{describeFeatureType:e.data,loading:!1,error:void 0}})).catch((function(e){return o().Observable.of({loading:!1,error:e})}))}))}},55105:(e,t,r)=>{"use strict";r.d(t,{Nr:()=>p,ic:()=>f,Jz:()=>h,VM:()=>d,CF:()=>g});var n=r(20721),o=r.n(n),a=r(827),u=r(52259);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=function(e){return e.maplayout&&e.maplayout.layout||{}},p=function(e){return e.maplayout&&e.maplayout.boundingMapRect||{}},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=s(e);return r&&Object.keys(r).filter((function(e){return t[e]})).reduce((function(e,t){return c(c({},e),{},l({},t,r[t]))}),{})||{}},y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=s(e),n=!!o()(t.filter((function(e){return r[e.key]})).map((function(e){return"not"===e.type?r[e.key]!==e.value&&r[e.key]:r[e.key]===e.value})));return n},h=function(e){return y(e,[{key:"right",value:658}])},d=function(e){return y(e,[{key:"bottom",value:30,type:"not"}])},g=function(e){var t=(0,a.Od)(e),r=p(e);return r&&t&&t.size&&{left:(0,u.parseLayoutValue)(r.left,t.size.width),bottom:(0,u.parseLayoutValue)(r.bottom,t.size.height),right:(0,u.parseLayoutValue)(r.right,t.size.width),top:(0,u.parseLayoutValue)(r.top,t.size.height)}}},43143:(e,t,r)=>{"use strict";r.d(t,{qH:()=>c,qj:()=>l,qq:()=>s});var n,o=r(79115),a=r.n(o),u=r(89796),i=r.n(u),c=function(e,t,r,o){var a=e;isNaN(parseFloat(e))&&(a=n.hexToHsv(e)[0]);var u=.5/(r-1),i=t/(r-1),c=[];1===r&&(u=.5,i=t/2);for(var l=0;l<r;l++){var s=a+l*i-t/2,p=u*l+.3,f=p;o&&(s=o.h||s,p=o.s||p,f=o.v||f),c.push(n.hsvToHex(s,p,f,l))}return c},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"red";return a()(e).toHexString()},s=function(e,t,r){var n=a()(e);return e&&n.setAlpha(i()(void 0!==t?t:n.getAlpha())).toRgbString()||r};n={decToHex:function(e){var t="0123456789ABCDEF",r=parseInt(e,10);return r=isNaN(r)?0:r,t.charAt(((r=r>255||r<0?0:r)-r%16)/16)+t.charAt(r%16)},rgbToHex:function(e,t,r){return e instanceof Array?n.rgbToHex(e[0],e[1],e[2]):"#"+n.decToHex(e)+n.decToHex(t)+n.decToHex(r)},realToDec:function(e){return Math.min(255,Math.round(256*e))},rgbToHsv:function(e,t,r){if(e instanceof Array)return n.rgbToHsv(e[0],e[1],e[2]);var o,a,u,i,c,l=e/255,s=t/255,p=r/255;switch(o=Math.min(Math.min(l,s),p),u=(a=Math.max(Math.max(l,s),p))-o,a){case o:i=0;break;case l:i=60*(s-p)/u,s<p&&(i+=360);break;case s:i=60*(p-l)/u+120;break;case p:i=60*(l-s)/u+240}return c=0===a?0:1-o/a,[Math.round(i),c,a]},distributedColorsHEX:function(e){for(var t=360/(e-1),r=[],o=function e(t,r,o){var a=e(t,r,o);return n.rgbToHex(a)},a=0;a<e;a++)r.push(o(t*a,.57,.63));return r},sameToneRangeColors:c,hsvToRgb:function(e,t,r){if(e instanceof Array)return n.hsvToRgb(e[0],e[1],e[2]);var o,a,u,i=Math.floor(e/60%6),c=e/60-i,l=r*(1-t),s=r*(1-c*t),p=r*(1-(1-c)*t);switch(i){case 0:o=r,a=p,u=l;break;case 1:o=s,a=r,u=l;break;case 2:o=l,a=r,u=p;break;case 3:o=l,a=s,u=r;break;case 4:o=p,a=l,u=r;break;case 5:o=r,a=l,u=s}return[n.realToDec(o),n.realToDec(a),n.realToDec(u)]},hsvToHex:function(e,t,r){var o=n.hsvToRgb(e,t,r);return n.rgbToHex(o)},hexToHsv:function(e){var t=e;if(t.length>0){"#"===t[0]&&(t=e.substring(1));var r=n.hexToRgb(t);return n.rgbToHsv(r)}return null},hexToRgb:function(e){var t,r,n,o=e;return"#"===o.charAt(0)&&(o=e.substring(1)),t=o.charAt(0)+o.charAt(1),r=o.charAt(2)+o.charAt(3),n=o.charAt(4)+o.charAt(5),[parseInt(t,16),parseInt(r,16),parseInt(n,16)]},colorToHexStr:l,colorToRgbaStr:s}}}]);